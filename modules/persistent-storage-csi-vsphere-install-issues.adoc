// Module included in the following assemblies:
//
// persistent-storage-csi-vsphere.adoc
//

:_content-type: PROCEDURE
[id="persistent-storage-csi-vsphere-install-issues_{context}"]
= Removing a third-party vSphere CSI Operator Driver

{product-title} {product-version} includes a built-in version of the vSphere Container Storage Interface (CSI) Operator Driver that is supported by Red Hat.

If you have installed a vSphere CSI driver provided by the community or another vendor, which is considered a third-party vSphere CSI driver, and you continue with upgrading to the next subsequent major version of {product-title}, the `oc` CLI prompts you with the following message: 

[source,terminal]
----
VSphereCSIDriverOperatorCRUpgradeable: VMwareVSphereControllerUpgradeable:
found existing unsupported csi.vsphere.vmware.com driver
----

The previous message informs you that Red Hat does not support the third-party vSphere CSI driver during an {product-title} upgrade operation. You can choose to ignore this message and continue with the upgrade operation.

The instructions outlined in the procedure demonstrate an example of how to uninstall a third-party vSphere CSI Driver. Consult the vendor's or community provider's uninstall guide for more detailed instructions on removing the driver and its components.

[IMPORTANT]
====
When removing a third-party vSphere CSI driver, you do not need to delete the associated persistent volume (PV) objects. Data loss typically does not occur, but Red Hat does not take any responsibility if data loss does occur.
====

After you have removed the third-party vSphere CSI Driver from the {product-title} cluster, installation of Red Hat's vSphere CSI Operator Driver automatically resumes. If you had existing vSphere CSI PV objects, their lifecycle is now managed by Red Hat's vSphere CSI Operator Driver.

.Procedure

. Delete the third-party vSphere CSI Driver (VMware vSphere Container Storage Plugin) Deployment and Daemonset objects.

. Delete the configmap and secret objects that were installed previously with the third-party vSphere CSI Driver.

. Delete the third-party vSphere CSI driver `CSIDriver` object:
+
[source,terminal]
----
~ $ oc delete CSIDriver csi.vsphere.vmware.com
----
+
[source,terminal]
----
csidriver.storage.k8s.io "csi.vsphere.vmware.com" deleted
----
